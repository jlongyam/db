var TPL=function(r,n){for(var e,t=/{%(.+?)%}/g,a="var r=[];\n",c=0,s=function(r,n){return a+=n?r.match(/(^( )?(if|for|else|switch|case|break|{|}))(.*)?/g)?r+"\n":"r.push("+r+");\n":""!=r?'r.push("'+r.replace(/"/g,'\\"')+'");\n':"",s};e=t.exec(r);)s(r.slice(c,e.index))(e[1],!0),c=t.lastIndex;return s(r.substr(c,r.length-c)),a+='return r.join("");',new Function(a.replace(/[\r\t\n]/g,"")).apply(n)};